<app-header></app-header>
<app-loading-spinner *ngIf="!pokemonSpecieDetails; else notFound"></app-loading-spinner>
<ng-container *ngIf="pokemonSpecieDetails">
  <ng-container *ngIf='pokemonSprite'>
    
      <div class='top-container'>
        <button (click)="goPrevious()">Previous</button>
        <Button (click)="goNext()">Next Pokemon</Button>
       
      </div>
      <div class="img-desc-container"> 
      <div class='img-stats-container'>
        <ng-container *ngIf='pokemonSprite.front_default; else elseBlock'>
          <h2> {{pokemonInfo.name | titlecase}}</h2>
          <div class='image-container'>
            <img class="specie"[src]=pokemonSprite.front_default>
          </div>
        </ng-container>
        <div class='stats-container'>
          <ng-container *ngIf="pokemonInfo">
            <h2>Stats:</h2>
            <table><tbody>
                <div *ngFor='let p of pokemonInfo.stats'>
                    <tr><td>{{p.stat.name}}: {{p.base_stat}}
                        <app-progress-bar [width$]='p.base_stat'></app-progress-bar>
                    </td></tr><p>
                        
                  </div>
      
            </tbody></table>
           
            <ul>
              <li>Base Happiness: {{pokemonSpecieDetails.base_happiness}}</li>
              <li>Capture Rate : {{pokemonSpecieDetails.capture_rate}}</li>
            </ul>
            <ng-container *ngIf='pokemonInfo'>
              <ul>
                <li>Height : {{pokemonInfo.height}} m</li>
                <li>Weight : {{pokemonInfo.weight}} lbs</li>
              </ul>
              <div *ngFor='let p of pokemonInfo.abilities'>
                <ng-container *ngIf='p.is_hidden == false'>
                  <ul>
                    <li>Skill: {{p.ability.name | titlecase}}</li>
                  </ul>
                </ng-container>
              </div>
            </ng-container>
          </ng-container>
        </div>
      </div>

      <div class="desc-container">
        <div class='description'>
          <h2>Description</h2>
          <p>{{pokemonDescription}}</p>
        </div>

        <div class='types-container'>
          <h2>Types:</h2>
          <ng-container *ngFor="let types of pokemonDetails">
            <div id='container' (click)=onSelect(types.type.name) class="{{types.type.name}}">
              {{types.type.name | uppercase}}
            </div>

          </ng-container>
        </div>
      </div>
    </div>
  </ng-container>

  <div class="evolution-container">
    <app-evolution-chain [specieUrl]='pokemonSpecieDetails.evolution_chain.url'></app-evolution-chain>
  </div>



</ng-container>

<ng-template #notFound>
  {{errorMsg}}
</ng-template>

<ng-template #elseBlock>
    <h2> {{pokemonInfo.name | titlecase}}</h2>
  <img class='default' src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/master-ball.png" />
</ng-template>